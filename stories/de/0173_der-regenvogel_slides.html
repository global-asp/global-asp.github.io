<!DOCTYPE html>
<head>
<meta charset="utf-8">
  <title>Der Regenvogel - Global African Storybook</title>
  <style type="text/css">code{white-space: pre;}</style>
<style>
  html { background-color: black; }
  body { background-color: white; border-radius: 12px}
  /* A section is a slide. It's size is 800x600, and this will never change */
  section {
      font-family: Arial, serif;
      font-size: 14pt;
      text-align: center;
    }
  address, blockquote, dl, fieldset, form, h1, h2, h3, h4, h5, h6, hr, ol, p, pre, table, ul, dl { padding: 10px 20px 10px 20px; }
  h1, h2, h3 {
    text-align: center;
    margin: 10pt 10pt 20pt 10pt;
  }
  ul, ol {
    margin: 10px 10px 10px 50px;
  }
  img {
    width: 40%;
  }
  .license {
    font-size: small;
  }
  .license img {
    width: auto;
  }
  section.titleslide h1 { margin-top: 200px; }
  h1.title { margin-top: 150px; }
  h1 { font-size: 180%; }
  h2 { font-size: 120%; }
  h3 { font-size: 100%; }
  q { quotes: "“" "”" "‘" "’"; }
  blockquote { font-style: italic }
  /* Figures are displayed full-page, with the caption on
     top of the image/video */
  figure {
    background-color: black;
  }
  figcaption {
    margin: 70px;
  }
  footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 40px;
    text-align: right;
    background-color: #F3F4F8;
    border-top: 1px solid #CCC;
  }

  /* Transition effect */
  /* Feel free to change the transition effect for original
     animations. See here:
     https://developer.mozilla.org/en/CSS/CSS_transitions
     How to use CSS3 Transitions: */
  section {
      -moz-transition: left 400ms linear 0s;
      -webkit-transition: left 400ms linear 0s;
      -ms-transition: left 400ms linear 0s;
      transition: left 400ms linear 0s;
  }

  /* Before */
  section { left: -150%; }
  /* Now */
  section[aria-selected] { left: 0; }
  /* After */
  section[aria-selected] ~ section { left: +150%; }

  /* Incremental elements */

  /* By default, visible */
  .incremental > * { opacity: 1; }

  /* The current item */
  .incremental > *[aria-selected] { color: red; opacity: 1; }

  /* The items to-be-selected */
  .incremental > *[aria-selected] ~ * { opacity: 0.2; }
</style>
</head>
<body>

<section id="der-regenvogel" class="slide level1">
<h1>Der Regenvogel</h1>
<center>
<img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/01.jpg" />
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/02.jpg" /></p>
<p>In einem Land mit Namen Gabon lag ein kleines Dorf am Rande eines Waldes. In der Mitte des Waldes auf dem höchsten Ast eines gewaltigen Baumes lebte ein sehr besonderer Vogel - der Vogel, der den Regen machte.</p>
<center>
<strong>1</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/03.jpg" /></p>
<p>So lange sich die Dorfbewohner erinnern konnten, hatten sie Zeit darauf verwendet, den Vogel glücklich zu machen. Sie sammelten Brotreste, Obststücke und frische Kokosmilch, und alle ein bis zwei Wochen brachte eine Gruppe der Dorfbewohner diese Köstlichkeiten in den Wald. Wenn sie sie am Fuße des Baumes ablegten, spielte einer von ihnen ein einfaches Lied auf einer Kalimba.</p>
<center>
<strong>2</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/04.jpg" /></p>
<p>Nach einer Weile flog der Vogel herunter auf den Waldboden und er aß und trank. Wenn er fertig war, begann er, ein wunderschönes Lied zu singen. Gleichzeitig erhob er seine dunklen, leuchtend blauen Flügel und innerhalb weniger Minuten fing es an zu regnen.</p>
<center>
<strong>3</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/05.jpg" /></p>
<p>Das ging viele Jahre lang so. Weil es regelmäßig regnete, wuchsen die Feldfrüchte reichlich und es gab Nahrung im Überfluss. Aber allmählich änderten sich die Dinge. Irgendwie waren die Dorfbewohner immer beschäftigt und sie fingen an, den Regenvogel zu vernachlässigen. &quot;Es wird sowieso regnen&quot;, sagten sie. &quot;Es ist an der Zeit aufzuhören, diesen albernen, alten Vogel zu verwöhnen.</p>
<center>
<strong>4</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/06.jpg" /></p>
<p>Aber die Leute irrten sich. Als sie aufhörten, sich um den Vogel zu kümmern, hörte es auf zu regnen. Die Ernte begann zu vertrocknen und abzusterben, und die Tiere wurden dünn und schwach. Trotzdem ging niemand im Dorf in den Wald, um den Vogel zu füttern, der den Regen brachte. Jetzt waren sie alle zu beschäftigt damit, in der Nachbarstadt Geld zu verdienen, um Essen zu kaufen.</p>
<center>
<strong>5</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/07.jpg" /></p>
<p>An einem heißen Tag beschloss ein junges Mädchen mit Namen Ketti, nach der Schule in den Wald zu gehen. &quot;Zumindest wird es dort kühl sein&quot;, dachte sie bei sich. Sie ging und ging, und nach einiger Zeit kam sie zu dem großen Baum, auf dem der Regenvogel lebte. Ketti blickte den Baum hinauf. Plötzlich erinnerte sie sich daran, wie ihre Oma sie in den Wald geführt hatte, um den Vogel zu füttern, als sie noch ein kleines Kind gewesen war. Ketti öffnete ihre Schultasche und holte ein Stück Brot hervor, das von ihrem Mittagessen übrig geblieben war. Vorsichtig legte sie das Brot unter den Baum. Dann sang sie, weil sie keine Kalimba dabei hatte, ein altes Lied, das sie schon ihr ganzes Leben lang kannte.</p>
<center>
<strong>6</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/08.jpg" /></p>
<p>Mit einem lauten Rauschen stürzte ein schöner blauer Vogel aus den Zweigen über Kettis Kopf und begann, das Brot zu essen. Als der Vogel fertig war, öffnete er den Schnabel und sang ein paar klare, hohe Töne. Er erhob er seine glänzenden Flügel und dann plötzlich hörte Ketti das Grollen eines Donners. Als sie zu Hause ankam, prasselten riesige Regentropfen herab und kühlten die glühende rote Erde.</p>
<center>
<strong>7</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/09.jpg" /></p>
<p>Ketti war sehr glücklich, bis sie ihren Eltern erzählte, was passiert war. &quot;Sei nicht albern!&quot; schimpfte ihre Mutter. &quot;Niemand glaubt noch, dass der Vogel mit dem Regen zu tun hat!&quot; &quot;Deine Mutter hat recht&quot;, sagte Kettis Vater. &quot;Die Dürre ist jetzt vorbei und es wird uns gut gehen. Verschwende kein gutes Brot mehr, um noch mal diesen gierigen alten Vogel zu füttern!&quot; Obwohl Ketti nicht mit ihren Eltern diskutierte, war sie sich sicher, dass sie unrecht hätten. &quot;Wenn nur Oma noch lebte&quot;, sagte sie zu sich selbst, &quot;sie hätte mir geglaubt!&quot; Aber Kettis Oma war vor ein paar Jahren gestorben. Das einzige, was Ketti noch hatte, war die alte Kalimba ihrer Oma.</p>
<center>
<strong>8</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/10.jpg" /></p>
<p>Zwei Wochen vergingen und es fiel kein Regen mehr. Die Ernte begann wieder zu vertrocknen, und die Rippen der hungrigen Tiere fingen wieder an hervorzustehen. Die Sonne brannte unbarmherzig vom grell blauen Himmel herab. &quot;Es ist mir egal, was sie sagen!&quot; dachte Ketti. &quot;Wir brauchen Regen. Ich werde den Vogel morgen wieder füttern!&quot;</p>
<center>
<strong>9</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/11.jpg" /></p>
<p>Darum schlich Ketti sich früh am nächsten Morgen aus dem Haus, nachdem sie ein Stück Brot und eine Hand voll roter Beeren aus der Küche genommen hatte. Sie machte sich auf den Weg in die Mitte des Waldes. Sie hatte aber nicht gemerkt, dass auch ihr Vater wach war. Als er sah, was seine Tochter tat, wurde ihm klar, dass sie den Regenvogel wieder füttern würde.</p>
<center>
<strong>10</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/12.jpg" /></p>
<p>&quot;Ich werde diesem ungehorsamen Kind eine Lektion erteilen!&quot; sagte er wütend zu sich. Er nahm Bogen und Pfeile und folgte Ketti leise in den Wald. Gerade als der Vogel hinabflog, um das zu essen, was Ketti ihm mitgebracht hatte, hob ihr Vater seinen Bogen und schoss den tödlichen Pfeil ab. Der Pfeil flog direkt in das Herz des Vogels. Der Vogel stieß einen durchdringenden Schrei aus. Entsetzt wirbelte Ketti herum - gerade rechtzeitig, um ihren Vater tot umfallen zu sehen. Ketti schrie auf und drehte sich wieder um - gerade rechtzeitig, um zu sehen, wie der Pfeil schadlos vom glänzenden Körper des Vogels abfiel. Dann schwang sich der Vogel unverletzt auf den höchsten Ast des Baumes.</p>
<center>
<strong>11</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/13.jpg" /></p>
<p>Ketti rannte aus dem Wald heraus zu einem Ort der Verwüstung. Sie sah, dass alle Tiere und alle Menschen tot auf dem Boden lagen. Mit klopfendem Herzen rannte sie den ganzen Weg zurück bis zu ihrem Haus. Sie fand schnell die alte Kalimba ihrer Oma. &quot;Das ist meine einzige Hoffnung!&quot; dachte sie. &quot;Der Regenvogel ist wütend. Ich muss ihn wieder glücklich machen! ICH MUSS!&quot;</p>
<center>
<strong>12</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/14.jpg" /></p>
<p>Eine halbe Stunde später war Ketti wieder am Fuß des großen Baumes. Ihr Körper war schweißgebadet und sie schnappte nach Luft. Ein paar Schritte von ihr entfernt lag der leblose Körper ihres Vaters. Ketti sah schnell weg und begann mit zitternden Händen die Kalimba zu spielen. Sie spielte und spielte, bis ihr die Finger weh taten.</p>
<center>
<strong>13</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/15.jpg" /></p>
<p>Schließlich geschah das, was sie sich am meisten auf der Welt gewünscht hatte. Der Vogel flog hinunter, als wäre nichts geschehen. Der Vogel aß einige der Beeren, die noch auf dem Boden lagen und sang ein paar Töne. Als Ketti weiterspielte, hob der Vogel die Flügel. Ketti hörte ein Geräusch hinter sich.</p>
<center>
<strong>14</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/16.jpg" /></p>
<p>Ihr Vater war wieder aufgewacht. &quot;Es tut mir leid!&quot; sagte er immer wieder zu dem großen, blauen Vogel. Dann streckte er seine Hand nach seiner Tochter aus und sie gingen langsam zurück ins Dorf. Im Dorf lebten alle Menschen und Tiere wieder.</p>
<center>
<strong>15</strong>
</center>

</section>
<section class="slide level1">

<p><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0173/17.jpg" /></p>
<p>In dieser Nacht hielten die Dorfbewohner ein Treffen ab. Sie alle waren sich einig, dass sie eine wichtige Lektion erhalten hatten. Und von diesem Tag an verging keine Woche ohne einen Ausflug in den Wald, um den Vogel zu füttern, der ihnen den Regen brachte.</p>
<center>
<strong>16</strong>
</center>

</section>
<section class="slide level1">

<h2 id="der-regenvogel-1">Der Regenvogel</h2>
<strong>Text:</strong> Joanne Bloch (retold folktale)<br> <strong>Veranschaulichung:</strong> Wiehan de Jager, Nalibali<br> <strong>Übersetzung:</strong> chabauer<br> <strong>Sprache:</strong> Deutsch<br>
<p>
This story is brought to you by the <a href='https://global-asp.github.io/'>Global African Storybook Project</a>, an effort to translate the stories of the <a href='http://africanstorybook.org/'>African Storybook Project</a> into all the languages of the world.
<p>
You can view the original story on the ASP website <a href='http://africanstorybook.org/stories/rain-bird'>here</a>
<p><div class="license">
<a href="https://global-asp.github.io"><img src="https://global-asp.github.io/logo.png" alt="Global ASP logo" border="0" /></a>
</div>

<p><center><div class="license">
<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/">Creative Commons Attribution-NonCommercial 3.0 Unported License</a>.
</div></center>


</section>


<!-- {{{{ dzslides core
#
#
#     __  __  __       .  __   ___  __
#    |  \  / /__` |    | |  \ |__  /__`
#    |__/ /_ .__/ |___ | |__/ |___ .__/ core :€
#
#
# The following block of code is not supposed to be edited.
# But if you want to change the behavior of these slides,
# feel free to hack it!
#
-->

<div id="progress-bar"></div>

<!-- Default Style -->
<style>
  * { margin: 0; padding: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
  details { display: none; }
  body {
    width: 800px; height: 600px;
    margin-left: -400px; margin-top: -300px;
    position: absolute; top: 50%; left: 50%;
    overflow: hidden;
  }
  section {
    position: absolute;
    pointer-events: none;
    width: 100%; height: 100%;
  }
  section[aria-selected] { pointer-events: auto; }
  html { overflow: hidden; }
  body { display: none; }
  body.loaded { display: block; }
  .incremental {visibility: hidden; }
  .incremental[active] {visibility: visible; }
  #progress-bar{
    bottom: 0;
    position: absolute;
    -moz-transition: width 400ms linear 0s;
    -webkit-transition: width 400ms linear 0s;
    -ms-transition: width 400ms linear 0s;
    transition: width 400ms linear 0s;
  }
  figure {
    width: 100%;
    height: 100%;
  }
  figure > * {
    position: absolute;
  }
  figure > img, figure > video {
    width: 100%; height: 100%;
  }
</style>

<script>
  var Dz = {
    remoteWindows: [],
    idx: -1,
    step: 0,
    slides: null,
    progressBar : null,
    params: {
      autoplay: "1"
    }
  };

  Dz.init = function() {
    document.body.className = "loaded";
    this.slides = $$("body > section");
    this.progressBar = $("#progress-bar");
    this.setupParams();
    this.onhashchange();
    this.setupTouchEvents();
    this.onresize();
  }
  
  Dz.setupParams = function() {
    var p = window.location.search.substr(1).split('&');
    p.forEach(function(e, i, a) {
      var keyVal = e.split('=');
      Dz.params[keyVal[0]] = decodeURIComponent(keyVal[1]);
    });
  // Specific params handling
    if (!+this.params.autoplay)
      $$.forEach($$("video"), function(v){ v.controls = true });
  }

  Dz.onkeydown = function(aEvent) {
    // Don't intercept keyboard shortcuts
    if (aEvent.altKey
      || aEvent.ctrlKey
      || aEvent.metaKey
      || aEvent.shiftKey) {
      return;
    }
    if ( aEvent.keyCode == 37 // left arrow
      || aEvent.keyCode == 38 // up arrow
      || aEvent.keyCode == 33 // page up
    ) {
      aEvent.preventDefault();
      this.back();
    }
    if ( aEvent.keyCode == 39 // right arrow
      || aEvent.keyCode == 40 // down arrow
      || aEvent.keyCode == 34 // page down
    ) {
      aEvent.preventDefault();
      this.forward();
    }
    if (aEvent.keyCode == 35) { // end
      aEvent.preventDefault();
      this.goEnd();
    }
    if (aEvent.keyCode == 36) { // home
      aEvent.preventDefault();
      this.goStart();
    }
    if (aEvent.keyCode == 32) { // space
      aEvent.preventDefault();
      this.toggleContent();
    }
    if (aEvent.keyCode == 70) { // f
      aEvent.preventDefault();
      this.goFullscreen();
    }
  }

  /* Touch Events */

  Dz.setupTouchEvents = function() {
    var orgX, newX;
    var tracking = false;

    var db = document.body;
    db.addEventListener("touchstart", start.bind(this), false);
    db.addEventListener("touchmove", move.bind(this), false);

    function start(aEvent) {
      aEvent.preventDefault();
      tracking = true;
      orgX = aEvent.changedTouches[0].pageX;
    }

    function move(aEvent) {
      if (!tracking) return;
      newX = aEvent.changedTouches[0].pageX;
      if (orgX - newX > 100) {
        tracking = false;
        this.forward();
      } else {
        if (orgX - newX < -100) {
          tracking = false;
          this.back();
        }
      }
    }
  }

  /* Adapt the size of the slides to the window */

  Dz.onresize = function() {
    var db = document.body;
    var sx = db.clientWidth / window.innerWidth;
    var sy = db.clientHeight / window.innerHeight;
    var transform = "scale(" + (1/Math.max(sx, sy)) + ")";

    db.style.MozTransform = transform;
    db.style.WebkitTransform = transform;
    db.style.OTransform = transform;
    db.style.msTransform = transform;
    db.style.transform = transform;
  }


  Dz.getDetails = function(aIdx) {
    var s = $("section:nth-of-type(" + aIdx + ")");
    var d = s.$("details");
    return d ? d.innerHTML : "";
  }

  Dz.onmessage = function(aEvent) {
    var argv = aEvent.data.split(" "), argc = argv.length;
    argv.forEach(function(e, i, a) { a[i] = decodeURIComponent(e) });
    var win = aEvent.source;
    if (argv[0] === "REGISTER" && argc === 1) {
      this.remoteWindows.push(win);
      this.postMsg(win, "REGISTERED", document.title, this.slides.length);
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
      return;
    }
    if (argv[0] === "BACK" && argc === 1)
      this.back();
    if (argv[0] === "FORWARD" && argc === 1)
      this.forward();
    if (argv[0] === "START" && argc === 1)
      this.goStart();
    if (argv[0] === "END" && argc === 1)
      this.goEnd();
    if (argv[0] === "TOGGLE_CONTENT" && argc === 1)
      this.toggleContent();
    if (argv[0] === "SET_CURSOR" && argc === 2)
      window.location.hash = "#" + argv[1];
    if (argv[0] === "GET_CURSOR" && argc === 1)
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
    if (argv[0] === "GET_NOTES" && argc === 1)
      this.postMsg(win, "NOTES", this.getDetails(this.idx));
  }

  Dz.toggleContent = function() {
    // If a Video is present in this new slide, play it.
    // If a Video is present in the previous slide, stop it.
    var s = $("section[aria-selected]");
    if (s) {
      var video = s.$("video");
      if (video) {
        if (video.ended || video.paused) {
          video.play();
        } else {
          video.pause();
        }
      }
    }
  }

  Dz.setCursor = function(aIdx, aStep) {
    // If the user change the slide number in the URL bar, jump
    // to this slide.
    aStep = (aStep != 0 && typeof aStep !== "undefined") ? "." + aStep : ".0";
    window.location.hash = "#" + aIdx + aStep;
  }

  Dz.onhashchange = function() {
    var cursor = window.location.hash.split("#"),
        newidx = 1,
        newstep = 0;
    if (cursor.length == 2) {
      newidx = ~~cursor[1].split(".")[0];
      newstep = ~~cursor[1].split(".")[1];
      if (newstep > Dz.slides[newidx - 1].$$('.incremental > *').length) {
        newstep = 0;
        newidx++;
      }
    }
    this.setProgress(newidx, newstep);
    if (newidx != this.idx) {
      this.setSlide(newidx);
    }
    if (newstep != this.step) {
      this.setIncremental(newstep);
    }
    for (var i = 0; i < this.remoteWindows.length; i++) {
      this.postMsg(this.remoteWindows[i], "CURSOR", this.idx + "." + this.step);
    }
  }

  Dz.back = function() {
    if (this.idx == 1 && this.step == 0) {
      return;
    }
    if (this.step == 0) {
      this.setCursor(this.idx - 1,
                     this.slides[this.idx - 2].$$('.incremental > *').length);
    } else {
      this.setCursor(this.idx, this.step - 1);
    }
  }

  Dz.forward = function() {
    if (this.idx >= this.slides.length &&
        this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
        return;
    }
    if (this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
      this.setCursor(this.idx + 1, 0);
    } else {
      this.setCursor(this.idx, this.step + 1);
    }
  }

  Dz.goStart = function() {
    this.setCursor(1, 0);
  }

  Dz.goEnd = function() {
    var lastIdx = this.slides.length;
    var lastStep = this.slides[lastIdx - 1].$$('.incremental > *').length;
    this.setCursor(lastIdx, lastStep);
  }

  Dz.setSlide = function(aIdx) {
    this.idx = aIdx;
    var old = $("section[aria-selected]");
    var next = $("section:nth-of-type("+ this.idx +")");
    if (old) {
      old.removeAttribute("aria-selected");
      var video = old.$("video");
      if (video) {
        video.pause();
      }
    }
    if (next) {
      next.setAttribute("aria-selected", "true");
      var video = next.$("video");
      if (video && !!+this.params.autoplay) {
        video.play();
      }
    } else {
      // That should not happen
      this.idx = -1;
      // console.warn("Slide doesn't exist.");
    }
  }

  Dz.setIncremental = function(aStep) {
    this.step = aStep;
    var old = this.slides[this.idx - 1].$('.incremental > *[aria-selected]');
    if (old) {
      old.removeAttribute('aria-selected');
    }
    var incrementals = $$('.incremental');
    if (this.step <= 0) {
      $$.forEach(incrementals, function(aNode) {
        aNode.removeAttribute('active');
      });
      return;
    }
    var next = this.slides[this.idx - 1].$$('.incremental > *')[this.step - 1];
    if (next) {
      next.setAttribute('aria-selected', true);
      next.parentNode.setAttribute('active', true);
      var found = false;
      $$.forEach(incrementals, function(aNode) {
        if (aNode != next.parentNode)
          if (found)
            aNode.removeAttribute('active');
          else
            aNode.setAttribute('active', true);
        else
          found = true;
      });
    } else {
      setCursor(this.idx, 0);
    }
    return next;
  }

  Dz.goFullscreen = function() {
    var html = $('html'),
        requestFullscreen = html.requestFullscreen || html.requestFullScreen || html.mozRequestFullScreen || html.webkitRequestFullScreen;
    if (requestFullscreen) {
      requestFullscreen.apply(html);
    }
  }
  
  Dz.setProgress = function(aIdx, aStep) {
    var slide = $("section:nth-of-type("+ aIdx +")");
    if (!slide)
      return;
    var steps = slide.$$('.incremental > *').length + 1,
        slideSize = 100 / (this.slides.length - 1),
        stepSize = slideSize / steps;
    this.progressBar.style.width = ((aIdx - 1) * slideSize + aStep * stepSize) + '%';
  }
  
  Dz.postMsg = function(aWin, aMsg) { // [arg0, [arg1...]]
    aMsg = [aMsg];
    for (var i = 2; i < arguments.length; i++)
      aMsg.push(encodeURIComponent(arguments[i]));
    aWin.postMessage(aMsg.join(" "), "*");
  }
  
  function init() {
    Dz.init();
    window.onkeydown = Dz.onkeydown.bind(Dz);
    window.onresize = Dz.onresize.bind(Dz);
    window.onhashchange = Dz.onhashchange.bind(Dz);
    window.onmessage = Dz.onmessage.bind(Dz);
  }

  window.onload = init;
</script>


<script> // Helpers
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {

      // closest thing possible to the ECMAScript 5 internal IsCallable
      // function 
      if (typeof this !== "function")
      throw new TypeError(
        "Function.prototype.bind - what is trying to be fBound is not callable"
      );

      var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          fNOP = function () {},
          fBound = function () {
            return fToBind.apply( this instanceof fNOP ? this : oThis || window,
                   aArgs.concat(Array.prototype.slice.call(arguments)));
          };

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();

      return fBound;
    };
  }

  var $ = (HTMLElement.prototype.$ = function(aQuery) {
    return this.querySelector(aQuery);
  }).bind(document);

  var $$ = (HTMLElement.prototype.$$ = function(aQuery) {
    return this.querySelectorAll(aQuery);
  }).bind(document);

  $$.forEach = function(nodeList, fun) {
    Array.prototype.forEach.call(nodeList, fun);
  }

</script>
<!-- vim: set fdm=marker: }}} -->
</body>
</html>

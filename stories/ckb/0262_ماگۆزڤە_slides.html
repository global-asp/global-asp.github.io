<!DOCTYPE html>
<head>
<meta charset="utf-8">
  <title>ماگۆزڤە - Global African Storybook</title>
  <style type="text/css">code{white-space: pre;}</style>
<style>
  html { background-color: black; }
  body { background-color: white; border-radius: 12px}
  /* A section is a slide. It's size is 800x600, and this will never change */
  section {
      font-family: Arial, serif;
      font-size: 14pt;
      text-align: center;
    }
  address, blockquote, dl, fieldset, form, h1, h2, h3, h4, h5, h6, hr, ol, p, pre, table, ul, dl { padding: 10px 20px 10px 20px; }
  h1, h2, h3 {
    text-align: center;
    margin: 10pt 10pt 20pt 10pt;
  }
  ul, ol {
    margin: 10px 10px 10px 50px;
  }
  img {
    width: 40%;
  }
  .license {
    font-size: small;
  }
  .license img {
    width: auto;
  }
  section.titleslide h1 { margin-top: 200px; }
  h1.title { margin-top: 150px; }
  h1 { font-size: 180%; }
  h2 { font-size: 120%; }
  h3 { font-size: 100%; }
  q { quotes: "“" "”" "‘" "’"; }
  blockquote { font-style: italic }
  /* Figures are displayed full-page, with the caption on
     top of the image/video */
  figure {
    background-color: black;
  }
  figcaption {
    margin: 70px;
  }
  footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    padding: 40px;
    text-align: right;
    background-color: #F3F4F8;
    border-top: 1px solid #CCC;
  }

  /* Transition effect */
  /* Feel free to change the transition effect for original
     animations. See here:
     https://developer.mozilla.org/en/CSS/CSS_transitions
     How to use CSS3 Transitions: */
  section {
      -moz-transition: left 400ms linear 0s;
      -webkit-transition: left 400ms linear 0s;
      -ms-transition: left 400ms linear 0s;
      transition: left 400ms linear 0s;
  }

  /* Before */
  section { left: -150%; }
  /* Now */
  section[aria-selected] { left: 0; }
  /* After */
  section[aria-selected] ~ section { left: +150%; }

  /* Incremental elements */

  /* By default, visible */
  .incremental > * { opacity: 1; }

  /* The current item */
  .incremental > *[aria-selected] { color: red; opacity: 1; }

  /* The items to-be-selected */
  .incremental > *[aria-selected] ~ * { opacity: 0.2; }
</style>
</head>
<body>

<section id="ماگۆزڤە" class="slide level1">
<h1 dir="rtl">ماگۆزڤە</h1>
<center>
<img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/01.jpg" />
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/02.jpg" /></p>
<p dir="rtl">لە شاری پڕحەشیمەتی نایروبی، دوور لە باوەشی گەرمی خێزان دەستەیەك لە كوڕانی بێ حاڵ و ماڵ لەسەر جادەكان ڕۆژیان بەسەردەكردەوە. ئەوان ڕۆژانە بە بێ هیچ ئامانجێك ژیانیان دەگوزەراند. ئەم كوڕانە لە سەرجادەكان دەخەوتن، بەیانیان، كاتێك لە خەو هەڵدەستان ڕاخەرەكانیان كۆدەكردەوە. بۆ ئەوەی لە سەرمای زستان خۆ بپارێزن، زبڵەكانیان دەسوتاند و ئاگریان دەكردەوە بۆ ئەوەی خۆیان گەرم كەنەوە. ماگۆزڤەش یەكێك بوو لەو.</p>
<p dir="rtl">كوڕانە. ئەو بچوكترین ئەندامی ئەو گروپە بوو.</p>
<center>
<strong>1</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/03.jpg" /></p>
<p dir="rtl">كاتێ دایك و باوكی ماگۆزڤە مردن، ئەو تەمەنی تەنها پێنج ساڵ بوو. ڕۆشت بۆ ئەوەی لە گەل مامی ژیان بەسەربەرێت. بەڵام مامی ئاگای لە ماگۆزڤە نەدەبوو، و خواردنی پێویستی.</p>
<p dir="rtl">پێ نەدەدا. ئەو ماگۆزڤەی ناچار دەكرد كە كاری زۆر سەخت ئەنجام بدات.</p>
<center>
<strong>2</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/04.jpg" /></p>
<p dir="rtl">ئەگەر ماگۆزڤە گلەیی كردبا یان پرسیاری كردبا، ئەوا مامی بە توندی لێی دەدا و پێی دەگوت: تۆ زۆر لەوە گێژتری كە بتوانی شتێك فێر بیت. دوای سێ ساڵ خۆڕاگرتن لەو بارودۆخە سەختەدا، لە كۆتایدا ماگۆزڤە بڕیاری دا ئەو ماڵە بە جێ بهێڵێت و چوو لە سەر.</p>
<p dir="rtl">جادەكان بژی.</p>
<center>
<strong>3</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/05.jpg" /></p>
<p dir="rtl">ژیانی سەر جادەكان زۆر ناخۆش بوو، زۆربەی كوڕەكان ڕۆژانە خۆیان ماندوو دەكرد تەنها بۆ ئەوەی خواردنیان دەستكەوێت. هەندێ جار دەستگیر دەكران یان لێیان دەدرا. كاتێكیش نەخۆش دەكەوتن، كەس نەبوو یارمەتیان بدات. ئەوان تەنها پارەیەكی كەمیان دەست دەكەوت ئەویش بە هۆی سواڵ كردن و فرۆشتی پلاستیك و شتی لەوجۆرە. ژیانیان.</p>
<p dir="rtl">ئەستەم تر دەبوو كاتێك گروپی دیكەش دەهاتن و دەبوو بە كێبڕكێ و شەر لە نێوانیان.</p>
<center>
<strong>4</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/06.jpg" /></p>
<p dir="rtl">ڕۆژێكیان كاتێ ماگۆزڤە لە ناو تەنەكەی خۆڵەكان دەگەڕا، كتێبێكی چیرۆكی شڕ و دڕاوی دۆزیەوە. ئەو كتێبەكەی خاوێن كردەوە و خستیە ناو كیسەیەك. دوای ئەو ڕۆژە ئەو هەمووجارێ كتێبەكەی لە كیسەكە دەردەهێنا و چاوی لە وێنەكانی ناو كتێبەكە دەكرد. ئەو.</p>
<p dir="rtl">نەیدەتوانی هیچ بخوێنێتەوە.</p>
<center>
<strong>5</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/07.jpg" /></p>
<p dir="rtl">وێنەكان، باسیان لە كوڕێك دەكرد كە دەیوست گەورە بێت و ببێ بە فڕۆكەوان. ماگۆزڤە هەموو ڕۆژێ ئاواتی دەخواست كە ببێ بە فڕۆكەوان، هەندی جار خەیاڵی ئەوەی دەكردەوە.</p>
<p dir="rtl">كە ئەو مناڵەی ناو چیرۆكەكە خۆیەتی.</p>
<center>
<strong>6</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/08.jpg" /></p>
<p dir="rtl">هەوا سارد بوو و ماگۆزڤە لە كەنار جادەكە وەستا بوو. پیاوێك بەرەو لای چوو. پیاوەكە ووتی: سڵاو، من ناوم تۆماسە، من لەم نزیكانە كار دەكەم لە شوێنێك كە تۆ دەتوانی خۆراكت دەستكەوێت. ئەو ئاماژەی بە خانوویەكی زەرد كرد كە سەقفەكەی شین بوو. دواتر لە ماگۆزڤەی پرسی: ئومێدەواربم لەوەی كە دەچیتە ئەو شوێنە بۆ ئەوەی هەندێ.</p>
<p dir="rtl">خۆراكت دەستكەوێ؟ ماگۆزڤە ووتی: لەوانەیە و دواتر ڕۆشت.</p>
<center>
<strong>7</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/09.jpg" /></p>
<p dir="rtl">لە ماوەی مانگێك كە تێپەڕی كوڕەكان زۆر جار تۆماسیان دەبینی. ئەو هەمیشە پێی خۆش بوو لە گەڵ خەڵك قسە بكات، بە تایبەت ئەو خەڵكەی لە سەر جادەكان دەژیان. تۆماس گوێی بۆ ژیانی خەڵك ڕادەگرت. ئەو زۆر كەسێكی جیدی و پشوودرێژ بوو، ئەو كەسێكی.</p>
<p dir="rtl">خراپ و بێ ڕێز نەبوو. هەندێك لە كوڕەكان بۆ نانی نیوەڕۆ چوون بۆ خانوە زەردەكە.</p>
<center>
<strong>8</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/10.jpg" /></p>
<p dir="rtl">ماگۆزڤە لە لێواری پیادەڕەویەكە دانیشتبوو و چاوی لە وێنەكانی ناو كتێبەكەی دەكرد. كاتێك تۆماس هات و لە لای دانیشت، لێی پرسی: چیرۆكەكە لە بارەی چیە؟ ماگۆزڤە وەڵامی دایەوە: چیرۆكەكە لە.</p>
<p dir="rtl">بارەی كوڕێكە كە دەبێتە فڕۆكەوان. تۆماس لێی پرسی:.</p>
<p dir="rtl">كوڕەكە ناوی چیە؟ ماگۆزڤە وەڵامی دایەوە: نازانم، من ناتوانم بخوێنمەوە.</p>
<center>
<strong>9</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/11.jpg" /></p>
<p dir="rtl">كاتێ چاوییان بەیەك كەوت، ماگۆزڤە چیرۆكی ژیانی خۆی بۆ تۆماس باس كرد، ئەوەی كە مامی چەندە لە گەڵی خراپ بووە و لەبەرچی لە دەستی ئەو ڕایكردووە. تۆماس زۆر قسەی نەكرد و بە ماگۆزڤەشی نەگووت كە چی بكات، بەڵام هەمیشە بە ووردی گویی بۆ ڕادەگرت. هەندێك جار كاتێ لە ناو خانووە سەقف شینەكە بوون لە كاتی نان خواردن.</p>
<p dir="rtl">پێكەوە قسەیان دەكرد.</p>
<center>
<strong>10</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/12.jpg" /></p>
<p dir="rtl">لە ساڵ ڕۆژی لە دایك بوونی ماگۆزڤە كە دەبووە 10 ساڵ، تۆماس كتێبێكی چیرۆكی نوێی پێدا. چیرۆكەكە لەبارەی كوڕێكی لادێی بوو كە گەورە بوو بۆ ئەوەی ببێتە یاریزانێكی بە نێوبانگ. تۆماس چەندین جار ئەو چیرۆكەی بۆ ماگۆزڤە خوێندەوە، تا ئەوەی كە ڕۆژێك پێی گووت: پێم وابێ ئێستا كاتیەتی كە تۆ بچیت بۆ قوتابخانەو و خوێندن و نووسین فێربیت. تۆ پێت چۆنە؟ تۆماس كووتی من شوینێك دەزانم كە مناڵان دەتوانن لەوێدا بژین و.</p>
<p dir="rtl">بچن بۆ قوتابخانە.</p>
<center>
<strong>11</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/13.jpg" /></p>
<p dir="rtl">ماگۆزڤە بیری لەو شوینە نوێیە و لە قوتابخانە دەكردەوە. بەڵام ئەگەر مامی ڕاستی ووتبا چی؟ كاتێ ئەو دەیگووت ئەو زۆر لەوە گێژترە كە شتێك فێر بێت؟ ئەی ئەگەر لەو شوێنە نوێیە لێی بدەن چی؟</p>
<p dir="rtl">،ئەو ترسابوو. ئەو هەر لەبەر خۆیەوە بیری دەكردەوە و دەیووت.</p>
<p dir="rtl">لەوانەیە باشتر بێت هەر لە سەر جادەكان بژیم.</p>
<center>
<strong>12</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/14.jpg" /></p>
<p dir="rtl">ڕۆژێك هەموو ترسەكانی خۆی بۆ تۆماس باس كرد. بە پێی تێپەڕینی كات تۆماس باوەری.</p>
<p dir="rtl">پێهێنا كە ژیان لە شوینە نوێیەكە زۆر باشترە.</p>
<center>
<strong>13</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/15.jpg" /></p>
<p dir="rtl">لەبەرئەوە ماگۆزڤە چووە ناو ژورێكی نوی لە خانوویەكی سەقف سەوز. ئەو لە گەڵ دوو كوڕی دیكەدا لە ژورێك دەژیان. بە هەموویانەوە دە مناڵ بوون كە لە خانووە سەقف سەوزەكەدا دەژیان. لە گەڵ پورە سیزی و مێردەكەی، سێ سەگ و پشیلەیەك و بزنێكی.</p>
<p dir="rtl">پیر.</p>
<center>
<strong>14</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/16.jpg" /></p>
<p dir="rtl">ماگۆزڤە دەستی كرد بە خوێندن، وانە خوێندن زەحمەت بوو. ئەو دەبوایە فێری زۆر شت بووبا. هەندێك جار دەیهەویست خۆی بەدەستەوە بدات. بەڵام ئەو هەمیشە بیری لە فڕۆكەوانەكە و لەیاریزانەكە دەكردەوە كە لە كتێبی چیرۆكەكەدا خوێندبوونیەوە. ئەوانی.</p>
<p dir="rtl">خۆش دەویست بۆیە بەردەوام بوو.</p>
<center>
<strong>15</strong>
</center>

</section>
<section class="slide level1">

<p dir="rtl"><img src="https://raw.githubusercontent.com/global-asp/asp-imagebank/master/medium/0262/17.jpg" /></p>
<p dir="rtl">ماگۆزڤە لە حەوشەی خانووە سەقف سەوزەكەدا دانیشتبوو و چیرۆكیكی مناڵانی دەخوێندەوە كە لە قوتابخانە پێیان دابوو. تۆماس هات و لە لای دانیشت. تۆماس لێی پرسی: بابەتی چیرۆكەكە چیە؟ ماگۆزڤە لە وڵامدا ووتی: لە بارەی كوڕێكە كە دەبێتە مامۆستا. تۆماس لێی پرسی: ئەو كوڕە ناوی.</p>
<p dir="rtl">چییە؟ ماگزوە بە زەردەخەنەیەكەوە ووتی:.</p>
<p dir="rtl">ئەو كوڕە ناوی ماگۆزڤەیە.</p>
<center>
<strong>16</strong>
</center>

</section>
<section class="slide level1">

<h2 dir="rtl" id="ماگۆزڤە-1">ماگۆزڤە</h2>
<strong>Text:</strong> Lesley Koyi<br> <strong>Illustrations:</strong> Wiehan de Jager<br> <strong>Translation:</strong> Agri Afshin<br> <strong>Language:</strong> Kurdish (Sorani)<br>
<p dir="rtl">
This story is brought to you by the <a href='https://global-asp.github.io/'>Global African Storybook Project</a>, an effort to translate the stories of the <a href='http://africanstorybook.org/'>African Storybook Project</a> into all the languages of the world.
<p dir="rtl">
You can view the original story on the ASP website <a href='http://africanstorybook.org/stories/magozwe-0'>here</a>
<p dir="rtl"><div class="license">
<a href="https://global-asp.github.io"><img src="https://global-asp.github.io/logo.png" alt="Global ASP logo" border="0" /></a>
</div>

<p dir="rtl"><center><div class="license">
<a rel="license" href="http://creativecommons.org/licenses/by/3.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/3.0/88x31.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 Unported License</a>.
</div></center>


</section>


<!-- {{{{ dzslides core
#
#
#     __  __  __       .  __   ___  __
#    |  \  / /__` |    | |  \ |__  /__`
#    |__/ /_ .__/ |___ | |__/ |___ .__/ core :€
#
#
# The following block of code is not supposed to be edited.
# But if you want to change the behavior of these slides,
# feel free to hack it!
#
-->

<div id="progress-bar"></div>

<!-- Default Style -->
<style>
  * { margin: 0; padding: 0; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
  details { display: none; }
  body {
    width: 800px; height: 600px;
    margin-left: -400px; margin-top: -300px;
    position: absolute; top: 50%; left: 50%;
    overflow: hidden;
  }
  section {
    position: absolute;
    pointer-events: none;
    width: 100%; height: 100%;
  }
  section[aria-selected] { pointer-events: auto; }
  html { overflow: hidden; }
  body { display: none; }
  body.loaded { display: block; }
  .incremental {visibility: hidden; }
  .incremental[active] {visibility: visible; }
  #progress-bar{
    bottom: 0;
    position: absolute;
    -moz-transition: width 400ms linear 0s;
    -webkit-transition: width 400ms linear 0s;
    -ms-transition: width 400ms linear 0s;
    transition: width 400ms linear 0s;
  }
  figure {
    width: 100%;
    height: 100%;
  }
  figure > * {
    position: absolute;
  }
  figure > img, figure > video {
    width: 100%; height: 100%;
  }
</style>

<script>
  var Dz = {
    remoteWindows: [],
    idx: -1,
    step: 0,
    slides: null,
    progressBar : null,
    params: {
      autoplay: "1"
    }
  };

  Dz.init = function() {
    document.body.className = "loaded";
    this.slides = $$("body > section");
    this.progressBar = $("#progress-bar");
    this.setupParams();
    this.onhashchange();
    this.setupTouchEvents();
    this.onresize();
  }
  
  Dz.setupParams = function() {
    var p = window.location.search.substr(1).split('&');
    p.forEach(function(e, i, a) {
      var keyVal = e.split('=');
      Dz.params[keyVal[0]] = decodeURIComponent(keyVal[1]);
    });
  // Specific params handling
    if (!+this.params.autoplay)
      $$.forEach($$("video"), function(v){ v.controls = true });
  }

  Dz.onkeydown = function(aEvent) {
    // Don't intercept keyboard shortcuts
    if (aEvent.altKey
      || aEvent.ctrlKey
      || aEvent.metaKey
      || aEvent.shiftKey) {
      return;
    }
    if ( aEvent.keyCode == 37 // left arrow
      || aEvent.keyCode == 38 // up arrow
      || aEvent.keyCode == 33 // page up
    ) {
      aEvent.preventDefault();
      this.back();
    }
    if ( aEvent.keyCode == 39 // right arrow
      || aEvent.keyCode == 40 // down arrow
      || aEvent.keyCode == 34 // page down
    ) {
      aEvent.preventDefault();
      this.forward();
    }
    if (aEvent.keyCode == 35) { // end
      aEvent.preventDefault();
      this.goEnd();
    }
    if (aEvent.keyCode == 36) { // home
      aEvent.preventDefault();
      this.goStart();
    }
    if (aEvent.keyCode == 32) { // space
      aEvent.preventDefault();
      this.toggleContent();
    }
    if (aEvent.keyCode == 70) { // f
      aEvent.preventDefault();
      this.goFullscreen();
    }
  }

  /* Touch Events */

  Dz.setupTouchEvents = function() {
    var orgX, newX;
    var tracking = false;

    var db = document.body;
    db.addEventListener("touchstart", start.bind(this), false);
    db.addEventListener("touchmove", move.bind(this), false);

    function start(aEvent) {
      aEvent.preventDefault();
      tracking = true;
      orgX = aEvent.changedTouches[0].pageX;
    }

    function move(aEvent) {
      if (!tracking) return;
      newX = aEvent.changedTouches[0].pageX;
      if (orgX - newX > 100) {
        tracking = false;
        this.forward();
      } else {
        if (orgX - newX < -100) {
          tracking = false;
          this.back();
        }
      }
    }
  }

  /* Adapt the size of the slides to the window */

  Dz.onresize = function() {
    var db = document.body;
    var sx = db.clientWidth / window.innerWidth;
    var sy = db.clientHeight / window.innerHeight;
    var transform = "scale(" + (1/Math.max(sx, sy)) + ")";

    db.style.MozTransform = transform;
    db.style.WebkitTransform = transform;
    db.style.OTransform = transform;
    db.style.msTransform = transform;
    db.style.transform = transform;
  }


  Dz.getDetails = function(aIdx) {
    var s = $("section:nth-of-type(" + aIdx + ")");
    var d = s.$("details");
    return d ? d.innerHTML : "";
  }

  Dz.onmessage = function(aEvent) {
    var argv = aEvent.data.split(" "), argc = argv.length;
    argv.forEach(function(e, i, a) { a[i] = decodeURIComponent(e) });
    var win = aEvent.source;
    if (argv[0] === "REGISTER" && argc === 1) {
      this.remoteWindows.push(win);
      this.postMsg(win, "REGISTERED", document.title, this.slides.length);
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
      return;
    }
    if (argv[0] === "BACK" && argc === 1)
      this.back();
    if (argv[0] === "FORWARD" && argc === 1)
      this.forward();
    if (argv[0] === "START" && argc === 1)
      this.goStart();
    if (argv[0] === "END" && argc === 1)
      this.goEnd();
    if (argv[0] === "TOGGLE_CONTENT" && argc === 1)
      this.toggleContent();
    if (argv[0] === "SET_CURSOR" && argc === 2)
      window.location.hash = "#" + argv[1];
    if (argv[0] === "GET_CURSOR" && argc === 1)
      this.postMsg(win, "CURSOR", this.idx + "." + this.step);
    if (argv[0] === "GET_NOTES" && argc === 1)
      this.postMsg(win, "NOTES", this.getDetails(this.idx));
  }

  Dz.toggleContent = function() {
    // If a Video is present in this new slide, play it.
    // If a Video is present in the previous slide, stop it.
    var s = $("section[aria-selected]");
    if (s) {
      var video = s.$("video");
      if (video) {
        if (video.ended || video.paused) {
          video.play();
        } else {
          video.pause();
        }
      }
    }
  }

  Dz.setCursor = function(aIdx, aStep) {
    // If the user change the slide number in the URL bar, jump
    // to this slide.
    aStep = (aStep != 0 && typeof aStep !== "undefined") ? "." + aStep : ".0";
    window.location.hash = "#" + aIdx + aStep;
  }

  Dz.onhashchange = function() {
    var cursor = window.location.hash.split("#"),
        newidx = 1,
        newstep = 0;
    if (cursor.length == 2) {
      newidx = ~~cursor[1].split(".")[0];
      newstep = ~~cursor[1].split(".")[1];
      if (newstep > Dz.slides[newidx - 1].$$('.incremental > *').length) {
        newstep = 0;
        newidx++;
      }
    }
    this.setProgress(newidx, newstep);
    if (newidx != this.idx) {
      this.setSlide(newidx);
    }
    if (newstep != this.step) {
      this.setIncremental(newstep);
    }
    for (var i = 0; i < this.remoteWindows.length; i++) {
      this.postMsg(this.remoteWindows[i], "CURSOR", this.idx + "." + this.step);
    }
  }

  Dz.back = function() {
    if (this.idx == 1 && this.step == 0) {
      return;
    }
    if (this.step == 0) {
      this.setCursor(this.idx - 1,
                     this.slides[this.idx - 2].$$('.incremental > *').length);
    } else {
      this.setCursor(this.idx, this.step - 1);
    }
  }

  Dz.forward = function() {
    if (this.idx >= this.slides.length &&
        this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
        return;
    }
    if (this.step >= this.slides[this.idx - 1].$$('.incremental > *').length) {
      this.setCursor(this.idx + 1, 0);
    } else {
      this.setCursor(this.idx, this.step + 1);
    }
  }

  Dz.goStart = function() {
    this.setCursor(1, 0);
  }

  Dz.goEnd = function() {
    var lastIdx = this.slides.length;
    var lastStep = this.slides[lastIdx - 1].$$('.incremental > *').length;
    this.setCursor(lastIdx, lastStep);
  }

  Dz.setSlide = function(aIdx) {
    this.idx = aIdx;
    var old = $("section[aria-selected]");
    var next = $("section:nth-of-type("+ this.idx +")");
    if (old) {
      old.removeAttribute("aria-selected");
      var video = old.$("video");
      if (video) {
        video.pause();
      }
    }
    if (next) {
      next.setAttribute("aria-selected", "true");
      var video = next.$("video");
      if (video && !!+this.params.autoplay) {
        video.play();
      }
    } else {
      // That should not happen
      this.idx = -1;
      // console.warn("Slide doesn't exist.");
    }
  }

  Dz.setIncremental = function(aStep) {
    this.step = aStep;
    var old = this.slides[this.idx - 1].$('.incremental > *[aria-selected]');
    if (old) {
      old.removeAttribute('aria-selected');
    }
    var incrementals = $$('.incremental');
    if (this.step <= 0) {
      $$.forEach(incrementals, function(aNode) {
        aNode.removeAttribute('active');
      });
      return;
    }
    var next = this.slides[this.idx - 1].$$('.incremental > *')[this.step - 1];
    if (next) {
      next.setAttribute('aria-selected', true);
      next.parentNode.setAttribute('active', true);
      var found = false;
      $$.forEach(incrementals, function(aNode) {
        if (aNode != next.parentNode)
          if (found)
            aNode.removeAttribute('active');
          else
            aNode.setAttribute('active', true);
        else
          found = true;
      });
    } else {
      setCursor(this.idx, 0);
    }
    return next;
  }

  Dz.goFullscreen = function() {
    var html = $('html'),
        requestFullscreen = html.requestFullscreen || html.requestFullScreen || html.mozRequestFullScreen || html.webkitRequestFullScreen;
    if (requestFullscreen) {
      requestFullscreen.apply(html);
    }
  }
  
  Dz.setProgress = function(aIdx, aStep) {
    var slide = $("section:nth-of-type("+ aIdx +")");
    if (!slide)
      return;
    var steps = slide.$$('.incremental > *').length + 1,
        slideSize = 100 / (this.slides.length - 1),
        stepSize = slideSize / steps;
    this.progressBar.style.width = ((aIdx - 1) * slideSize + aStep * stepSize) + '%';
  }
  
  Dz.postMsg = function(aWin, aMsg) { // [arg0, [arg1...]]
    aMsg = [aMsg];
    for (var i = 2; i < arguments.length; i++)
      aMsg.push(encodeURIComponent(arguments[i]));
    aWin.postMessage(aMsg.join(" "), "*");
  }
  
  function init() {
    Dz.init();
    window.onkeydown = Dz.onkeydown.bind(Dz);
    window.onresize = Dz.onresize.bind(Dz);
    window.onhashchange = Dz.onhashchange.bind(Dz);
    window.onmessage = Dz.onmessage.bind(Dz);
  }

  window.onload = init;
</script>


<script> // Helpers
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {

      // closest thing possible to the ECMAScript 5 internal IsCallable
      // function 
      if (typeof this !== "function")
      throw new TypeError(
        "Function.prototype.bind - what is trying to be fBound is not callable"
      );

      var aArgs = Array.prototype.slice.call(arguments, 1),
          fToBind = this,
          fNOP = function () {},
          fBound = function () {
            return fToBind.apply( this instanceof fNOP ? this : oThis || window,
                   aArgs.concat(Array.prototype.slice.call(arguments)));
          };

      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();

      return fBound;
    };
  }

  var $ = (HTMLElement.prototype.$ = function(aQuery) {
    return this.querySelector(aQuery);
  }).bind(document);

  var $$ = (HTMLElement.prototype.$$ = function(aQuery) {
    return this.querySelectorAll(aQuery);
  }).bind(document);

  $$.forEach = function(nodeList, fun) {
    Array.prototype.forEach.call(nodeList, fun);
  }

</script>
<!-- vim: set fdm=marker: }}} -->
</body>
</html>
